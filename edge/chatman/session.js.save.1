
class Session{
	constructor(id, socket){
		this.id = id
		this.socket = socket
		this.socket.on('disconnect',() => this.onEnd(id))

		this.socket.on('data', data => this.onMessage(data))
	}

	onEnd(id){}
	onMessage(data){
		this.onSessionMessage && this.onSessionMessage(data)
	}

	initializeChannel(){
		let channelSize = 256
		this.channel = [...new Array(channelSize)].map( () => 0 )
	}

	send(data){
		if (this.channel){
			this.socket.emit('data', String.fromCharCode(this.channel) + '' data)
		}
	}
}

module.exports = Session
