
class Session{
	constructor(id, socket){
		let channelSize = 256
		this.channel = [...new Array(channelSize + 1)].map((_,i) => i === 0 ? channelSize : -1)
		this.id = id
		this.socket = socket
		this.socket.on('disconnect',() => this.onEnd(id))

		this.socket.on('data', data => this.onMessage(data))
	}

	initializeChannel(){
	}

	onEnd(id){}
	onMessage(data){
		this.onSessionMessage && this.onSessionMessage(data)
	}

	send(data){
		if (this.channel.length){
			this.socket.emit('data', data)
		}
	}
}

module.exports = Session
